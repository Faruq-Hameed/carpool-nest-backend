<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- API Gateway -->
  <rect x="320" y="40" width="160" height="60" rx="5" fill="#6495ED" stroke="#333" stroke-width="2"/>
  <text x="400" y="75" font-family="Arial" font-size="16" text-anchor="middle" fill="white">API Gateway</text>
  
  <!-- Service Discovery -->
  <rect x="40" y="40" width="160" height="60" rx="5" fill="#9370DB" stroke="#333" stroke-width="2"/>
  <text x="120" y="75" font-family="Arial" font-size="16" text-anchor="middle" fill="white">Service Discovery</text>
  
  <!-- Config Server -->
  <rect x="600" y="40" width="160" height="60" rx="5" fill="#9370DB" stroke="#333" stroke-width="2"/>
  <text x="680" y="75" font-family="Arial" font-size="16" text-anchor="middle" fill="white">Config Server</text>

  <!-- Microservices -->
  <!-- Auth Service -->
  <rect x="40" y="160" width="160" height="80" rx="5" fill="#4CAF50" stroke="#333" stroke-width="2"/>
  <text x="120" y="195" font-family="Arial" font-size="16" text-anchor="middle" fill="white">Auth Service</text>
  <text x="120" y="215" font-family="Arial" font-size="12" text-anchor="middle" fill="white">User Authentication</text>
  <text x="120" y="230" font-family="Arial" font-size="12" text-anchor="middle" fill="white">JWT Management</text>

  <!-- User Service -->
  <rect x="230" y="160" width="160" height="80" rx="5" fill="#4CAF50" stroke="#333" stroke-width="2"/>
  <text x="310" y="195" font-family="Arial" font-size="16" text-anchor="middle" fill="white">User Service</text>
  <text x="310" y="215" font-family="Arial" font-size="12" text-anchor="middle" fill="white">User Profiles</text>
  <text x="310" y="230" font-family="Arial" font-size="12" text-anchor="middle" fill="white">User Management</text>

  <!-- OTP Service -->
  <rect x="420" y="160" width="160" height="80" rx="5" fill="#4CAF50" stroke="#333" stroke-width="2"/>
  <text x="500" y="195" font-family="Arial" font-size="16" text-anchor="middle" fill="white">OTP Service</text>
  <text x="500" y="215" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Code Generation</text>
  <text x="500" y="230" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Verification</text>

  <!-- Car Service -->
  <rect x="610" y="160" width="160" height="80" rx="5" fill="#4CAF50" stroke="#333" stroke-width="2"/>
  <text x="690" y="195" font-family="Arial" font-size="16" text-anchor="middle" fill="white">Car Service</text>
  <text x="690" y="215" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Vehicle Information</text>
  <text x="690" y="230" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Driver Management</text>

  <!-- Ride Service -->
  <rect x="135" y="290" width="160" height="80" rx="5" fill="#4CAF50" stroke="#333" stroke-width="2"/>
  <text x="215" y="325" font-family="Arial" font-size="16" text-anchor="middle" fill="white">Ride Service</text>
  <text x="215" y="345" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Ride Management</text>
  <text x="215" y="360" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Ride History</text>

  <!-- Notification Service -->
  <rect x="325" y="290" width="160" height="80" rx="5" fill="#4CAF50" stroke="#333" stroke-width="2"/>
  <text x="405" y="325" font-family="Arial" font-size="16" text-anchor="middle" fill="white">Notification Service</text>
  <text x="405" y="345" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Push Notifications</text>
  <text x="405" y="360" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Email/SMS</text>

  <!-- Payment Service -->
  <rect x="515" y="290" width="160" height="80" rx="5" fill="#4CAF50" stroke="#333" stroke-width="2"/>
  <text x="595" y="325" font-family="Arial" font-size="16" text-anchor="middle" fill="white">Payment Service</text>
  <text x="595" y="345" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Payment Processing</text>
  <text x="595" y="360" font-family="Arial" font-size="12" text-anchor="middle" fill="white">Billing</text>

  <!-- Message Broker -->
  <rect x="230" y="430" width="340" height="60" rx="5" fill="#FF7F50" stroke="#333" stroke-width="2"/>
  <text x="400" y="465" font-family="Arial" font-size="16" text-anchor="middle" fill="white">Message Broker (Kafka/RabbitMQ)</text>

  <!-- Databases -->
  <g transform="translate(130, 540)">
    <rect x="-40" y="-30" width="80" height="60" rx="5" fill="#87CEFA" stroke="#333" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial" font-size="12" text-anchor="middle">Auth DB</text>
  </g>
  <g transform="translate(230, 540)">
    <rect x="-40" y="-30" width="80" height="60" rx="5" fill="#87CEFA" stroke="#333" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial" font-size="12" text-anchor="middle">User DB</text>
  </g>
  <g transform="translate(330, 540)">
    <rect x="-40" y="-30" width="80" height="60" rx="5" fill="#87CEFA" stroke="#333" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial" font-size="12" text-anchor="middle">OTP DB</text>
  </g>
  <g transform="translate(430, 540)">
    <rect x="-40" y="-30" width="80" height="60" rx="5" fill="#87CEFA" stroke="#333" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial" font-size="12" text-anchor="middle">Car DB</text>
  </g>
  <g transform="translate(530, 540)">
    <rect x="-40" y="-30" width="80" height="60" rx="5" fill="#87CEFA" stroke="#333" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial" font-size="12" text-anchor="middle">Ride DB</text>
  </g>
  <g transform="translate(630, 540)">
    <rect x="-40" y="-30" width="80" height="60" rx="5" fill="#87CEFA" stroke="#333" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial" font-size="12" text-anchor="middle">Payment DB</text>
  </g>

  <!-- Docker Container Boundary -->
  <rect x="15" y="130" width="770" height="430" rx="10" fill="none" stroke="#555" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="30" y="150" font-family="Arial" font-size="14" fill="#555">Docker Container Environment</text>

  <!-- Connections -->
  <!-- API Gateway to Services -->
  <line x1="400" y1="100" x2="400" y2="130" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="130" x2="120" y2="160" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="130" x2="310" y2="160" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="130" x2="500" y2="160" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="130" x2="690" y2="160" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="130" x2="215" y2="290" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="130" x2="405" y2="290" stroke="#333" stroke-width="2"/>
  <line x1="400" y1="130" x2="595" y2="290" stroke="#333" stroke-width="2"/>

  <!-- Service Discovery -->
  <line x1="120" y1="100" x2="120" y2="130" stroke="#333" stroke-width="2"/>
  <line x1="120" y1="130" x2="350" y2="130" stroke="#333" stroke-width="2"/>

  <!-- Config Server -->
  <line x1="680" y1="100" x2="680" y2="130" stroke="#333" stroke-width="2"/>
  <line x1="680" y1="130" x2="450" y2="130" stroke="#333" stroke-width="2"/>

  <!-- Services to Message Broker -->
  <line x1="120" y1="240" x2="120" y2="450" stroke="#333" stroke-width="2"/>
  <line x1="120" y1="450" x2="230" y2="450" stroke="#333" stroke-width="2"/>
  <line x1="310" y1="240" x2="310" y2="450" stroke="#333" stroke-width="2"/>
  <line x1="500" y1="240" x2="500" y2="430" stroke="#333" stroke-width="2"/>
  <line x1="690" y1="240" x2="690" y2="450" stroke="#333" stroke-width="2"/>
  <line x1="690" y1="450" x2="570" y2="450" stroke="#333" stroke-width="2"/>
  <line x1="215" y1="370" x2="215" y2="430" stroke="#333" stroke-width="2"/>
  <line x1="405" y1="370" x2="405" y2="430" stroke="#333" stroke-width="2"/>
  <line x1="595" y1="370" x2="595" y2="430" stroke="#333" stroke-width="2"/>

  <!-- Services to Databases -->
  <line x1="120" y1="240" x2="120" y2="510" stroke="#333" stroke-width="2"/>
  <line x1="310" y1="240" x2="310" y2="280" stroke="#333" stroke-width="2"/>
  <line x1="310" y1="280" x2="230" y2="510" stroke="#333" stroke-width="2"/>
  <line x1="500" y1="240" x2="500" y2="280" stroke="#333" stroke-width="2"/>
  <line x1="500" y1="280" x2="330" y2="510" stroke="#333" stroke-width="2"/>
  <line x1="690" y1="240" x2="690" y2="280" stroke="#333" stroke-width="2"/>
  <line x1="690" y1="280" x2="430" y2="510" stroke="#333" stroke-width="2"/>
  <line x1="215" y1="370" x2="215" y2="510" stroke="#333" stroke-width="2"/>
  <line x1="215" y1="510" x2="530" y2="510" stroke="#333" stroke-width="2"/>
  <line x1="595" y1="370" x2="595" y2="510" stroke="#333" stroke-width="2"/>
  <line x1="595" y1="510" x2="630" y2="510" stroke="#333" stroke-width="2"/>
</svg>